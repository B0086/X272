from flask import Flask, redirect, request
import requests

app = Flask(__name__)

# Ana URL'e gelen istekleri yönlendirme fonksiyonu
@app.route("/", defaults={"path": ""})
@app.route("/<path:path>")
def redirect_request(path):
    # Yönlendirilecek hedef URL
    target_url = "http://185.205.19.150/" + path
    # Gelen isteği yeniden oluşturarak hedef URL'e yönlendirme
    response = requests.request(
        method=request.method,
        url=target_url,
        headers={key: value for (key, value) in request.headers if key != 'Host'},
        data=request.get_data(),
        cookies=request.cookies,
        allow_redirects=False
    )
    # Hedef URL'den gelen cevabı kullanıcıya ileterek yönlendirme gerçekleştirme
    return response.content, response.status_code, response.headers.items()

if __name__ == "__main__":
    app.run(host='0.0.0.0', port=80)
